/*! jQuery.SpriteAnimation - v0.1.0 - 2013-01-15
* https://github.com/patrickgunderson/jQuery.spriteAnimation
* Copyright (c) 2013 Patrick Gunderson; Licensed MIT */
(function(e){e.spriteAnimation=function(t,n){var r=this;return r.$el=e(t),r.el=t,r.currentFrame=0,r.running=!1,r.timeout=null,r.$el.data("spriteAnimation",r),r.init=function(){r.el=t,r.options=e.extend({},e.spriteAnimation.options,n),r.$el=e(this.el),r.generate(),r.setFrameRate(r.options.frameRate)},r.generate=function(){r.$anim=e("<div/>").addClass("spriteAnimation"),r.$anim.css({backgroundImage:"url("+r.options.src+")",backgroundPosition:r.options.firstFramePosition.x+"px "+r.options.firstFramePosition.y+"px",width:r.options.frameWidth+"px",height:r.options.frameHeight+"px",overflow:"hidden"}),r.$el.append(r.$anim)},r.setFrameRate=function(e){return r.frameRate=e,r.frameDelay=1e3/e,r},r.play=function(){return r.running=!0,r.options.reverse=!1,r.delayNextFrame(),r},r.rewind=function(){return r.running=!0,r.options.reverse=!0,r.delayPrevFrame(),r},r.stop=function(){return r.timeout&&clearTimeout(r.timeout),r.running=!1,r},r.reset=function(){return r.stop(),r.currentFrame=0,r.gotoFrame(0),r},r.gotoFrame=function(e){var t=-r.options.firstFramePosition.x;r.options.orientation==="x"&&(t=-e*(r.options.frameWidth+r.options.frameSpacing)-r.options.firstFramePosition.x);var n=-r.options.firstFramePosition.y;return r.options.orientation==="y"&&(n=-e*(r.options.frameWidth+r.options.frameSpacing)-r.options.firstFramePosition.y),r.$anim.css({backgroundPosition:t+"px "+n+"px"}),r.options.reverse?r.delayPrevFrame():r.delayNextFrame(),r},r.nextFrame=function(){if(++r.currentFrame<r.options.numFrames)return r.gotoFrame(r.currentFrame);if(r.options.loop)return r.currentFrame=0,r.$el.trigger("loop"),gotoFrame(r.currentFrame)},r.prevFrame=function(){if(--r.currentFrame>=0)return r.gotoFrame(r.currentFrame);if(r.options.loop)return r.currentFrame=r.options.numFrames,r.$el.trigger("loop"),gotoFrame(r.currentFrame)},r.delayNextFrame=function(){r.running&&(r.timeout=setTimeout(function(){r.nextFrame()},r.frameDelay))},r.delayPrevFrame=function(){r.running&&(r.timeout=setTimeout(function(){r.prevFrame()},r.frameDelay))},r.complete=function(){typeof r.options.onComplete=="function"&&r.options.onComplete(),r.$el.trigger("complete")},r.init(),r},e.spriteAnimation.options={src:"",firstFramePosition:{x:0,y:0},orientation:"x",frameWidth:25,frameHeight:25,frameSpacing:0,frameRate:25,numFrames:10,loop:!1,reverse:!1,onComplete:null},e.fn.spriteAnimation=function(t){return this.each(function(){var n,r;if(!(anim=this.spriteAnimation)){if(!t.src)if(!(t.src=this.css("backgroundImage"))||!(t.src=this.attr("src"))){var i=console?console.error("SpriteAnimation requires image src."):!1;return this}n=e.extend({},e.spriteAnimation.options,t),this.spriteAnimation=anim=new e.spriteAnimation(this,n);var s=console?console.log("new SpriteAnimation, "+t.src):!0}return t&&typeof t=="object"?(e.extend(anim.options,t),t.frameRate&&anim.setFrameRate(t.frameRate),t.frame&&anim.gotoFrame(t.frame)):t&&typeof t=="string"?(t==="play"&&anim.play(),t==="rewind"&&anim.rewind(),t==="stop"&&anim.stop(),t==="reset"&&anim.reset()):t&&!isNaN(parseInt(t,10))?anim.gotoFrame(t):t||anim.reset(),this})}})(jQuery);