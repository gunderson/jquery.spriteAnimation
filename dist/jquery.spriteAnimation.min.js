/*! jquery.spriteAnimation - v0.1.1 - 2013-07-25
* https://github.com/gunderson/jquery.spriteAnimation
* Copyright (c) 2013 Patrick Gunderson; Licensed MIT */
(function(e){e.spriteAnimation=function(t,n){var r=this;return r.$el=e(t),r.el=t,r.currentFrame=0,r.running=!1,r.timeout=null,r.$el.data("spriteAnimation",r),r.init=function(){r.el=t,r.options=e.extend({},e.spriteAnimation.options,n),r.$el=e(this.el),r.generate(),r.setFrameRate(r.options.frameRate)},r.generate=function(){r.$anim=e("<div/>").addClass("spriteAnimation"),r.$anim.css({backgroundImage:"url("+r.options.src+")",backgroundPosition:r.options.firstFramePosition.x+"px "+r.options.firstFramePosition.y+"px",width:r.options.frameWidth+"px",height:Math.abs(r.options.frameHeight)+"px",overflow:"hidden"}),r.$el.append(r.$anim)},r.setFrameRate=function(e){return r.frameRate=e,r.frameDelay=1e3/e,r},r.play=function(){return r.running=!0,r.options.reverse=!1,r.delayNextFrame(),r},r.rewind=function(){return r.running=!0,r.options.reverse=!0,r.delayPrevFrame(),r},r.stop=function(){return r.timeout&&clearTimeout(r.timeout),r.running=!1,r},r.reset=function(){return r.stop(),r.currentFrame=0,r.gotoFrame(0),r},r.gotoFrame=function(e){var t=-r.options.firstFramePosition.x;"x"===r.options.orientation&&(t=-e*(r.options.frameWidth+r.options.frameSpacing)-r.options.firstFramePosition.x);var n=-r.options.firstFramePosition.y;return"y"===r.options.orientation&&(n=-e*(r.options.frameHeight+r.options.frameSpacing)-r.options.firstFramePosition.y),r.$anim.css({backgroundPosition:t+"px "+n+"px"}),r.options.reverse?r.delayPrevFrame():r.delayNextFrame(),r},r.nextFrame=function(){return++r.currentFrame<r.options.numFrames?r.gotoFrame(r.currentFrame):r.options.loop?(r.currentFrame=0,r.$el.trigger("loop"),gotoFrame(r.currentFrame)):(r.complete(),r.stop())},r.prevFrame=function(){return--r.currentFrame>=0?r.gotoFrame(r.currentFrame):r.options.loop?(r.currentFrame=r.options.numFrames,r.$el.trigger("loop"),r.gotoFrame(r.currentFrame)):(r.complete(),r.stop())},r.delayNextFrame=function(){r.running&&(r.timeout=setTimeout(function(){r.nextFrame()},r.frameDelay))},r.delayPrevFrame=function(){r.running&&(r.timeout=setTimeout(function(){r.prevFrame()},r.frameDelay))},r.complete=function(){"function"==typeof r.options.onComplete&&r.options.onComplete(),r.$el.trigger("complete")},r.init(),r},e.spriteAnimation.options={src:"",firstFramePosition:{x:0,y:0},orientation:"x",frameWidth:25,frameHeight:25,frameSpacing:0,frameRate:25,numFrames:10,loop:!1,reverse:!1,onComplete:null},e.fn.spriteAnimation=function(t){return this.each(function(){var n,r=e(this);if(!(anim=this.spriteAnimation)){if(!(t.src||(t.src=r.css("backgroundImage"))&&(t.src=r.attr("src"))))return console?console.error("SpriteAnimation requires image src."):!1,this;n=e.extend({},e.spriteAnimation.options,t),this.spriteAnimation=anim=new e.spriteAnimation(this,n)}return t&&"object"==typeof t?(e.extend(anim.options,t),t.frameRate&&anim.setFrameRate(t.frameRate),t.firstFramePosition&&anim.gotoFrame(0),t.frame&&anim.gotoFrame(t.frame),t.frameRatio&&anim.gotoFrame(t.frameRatio*anim.options.numFrames>>0)):t&&"string"==typeof t?("play"===t&&anim.play(),"rewind"===t&&anim.rewind(),"stop"===t&&anim.stop(),"reset"===t&&anim.reset()):t&&!isNaN(parseInt(t,10))?anim.gotoFrame(t):t||anim.reset(),this})}})(jQuery);